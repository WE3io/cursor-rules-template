<!doctype html><html lang=en-us><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Respect the Spec | AI Blindspots</title>
<meta name=title content="Respect the Spec"><meta name=description content="When designing changes, it is important to keep in mind what parts of the
system you can change and what parts you cannot.  For example:


If you expose a public API, you should prefer not to make a BC breaking
change to the API, even if it would make your life easier if the API was
different.


If you interact with an external system, you have to conform to the API that
actually exists, not some wishful thinking version that directly gives you
what you want."><meta name=keywords content><meta property="og:url" content="https://ezyang.github.io/ai-blindspots/respect-the-spec/"><meta property="og:site_name" content="AI Blindspots"><meta property="og:title" content="Respect the Spec"><meta property="og:description" content="When designing changes, it is important to keep in mind what parts of the system you can change and what parts you cannot. For example:
If you expose a public API, you should prefer not to make a BC breaking change to the API, even if it would make your life easier if the API was different.
If you interact with an external system, you have to conform to the API that actually exists, not some wishful thinking version that directly gives you what you want."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2025-03-07T11:28:00-05:00"><meta property="article:modified_time" content="2025-03-07T11:28:00-05:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Respect the Spec"><meta name=twitter:description content="When designing changes, it is important to keep in mind what parts of the system you can change and what parts you cannot. For example:
If you expose a public API, you should prefer not to make a BC breaking change to the API, even if it would make your life easier if the API was different.
If you interact with an external system, you have to conform to the API that actually exists, not some wishful thinking version that directly gives you what you want."><meta itemprop=name content="Respect the Spec"><meta itemprop=description content="When designing changes, it is important to keep in mind what parts of the system you can change and what parts you cannot. For example:
If you expose a public API, you should prefer not to make a BC breaking change to the API, even if it would make your life easier if the API was different.
If you interact with an external system, you have to conform to the API that actually exists, not some wishful thinking version that directly gives you what you want."><meta itemprop=datePublished content="2025-03-07T11:28:00-05:00"><meta itemprop=dateModified content="2025-03-07T11:28:00-05:00"><meta itemprop=wordCount content="315"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width:800px;--font-main:Verdana, sans-serif;--font-secondary:Verdana, sans-serif;--font-scale:1em;--background-color:#fff;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--code-background-color:#f2f2f2;--code-color:#222;--blockquote-color:#222}@media(prefers-color-scheme:dark){:root{--background-color:#333;--heading-color:#eee;--text-color:#ddd;--link-color:#8cc2dd;--visited-color:#8b6fcb;--code-background-color:#777;--code-color:#ddd;--blockquote-color:#ccc}}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}code{font-family:monospace;padding:2px;background-color:var(--code-background-color);color:var(--code-color);border-radius:3px}blockquote{border-left:1px solid #999;color:var(--code-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{padding:1px 15px;background-color:var(--code-background-color);color:var(--code-color);border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}</style></head><body><header><a href=/ai-blindspots/ class=title><h2>AI Blindspots</h2></a><nav><a href=/ai-blindspots/>Home</a>
<a href=/ai-blindspots/blog>Blog</a></nav></header><main><h1>Respect the Spec</h1><p><i><time datetime=2025-03-07>2025-03-07</time></i></p><content><p>When designing changes, it is important to keep in mind what parts of the
system you can change and what parts you cannot. For example:</p><ul><li><p>If you expose a public API, you should prefer not to make a BC breaking
change to the API, even if it would make your life easier if the API was
different.</p></li><li><p>If you interact with an external system, you have to conform to the API that
actually exists, not some wishful thinking version that directly gives you
what you want.</p></li><li><p>If a test is failing, you should not delete it to make the test suite pass,
you should understand if the test is right or not.</p></li></ul><p>The common theme for all of these is that some parts of the system are part of the specification, and while <em>occasionally</em> the right thing to do is to change the spec, for day-to-day coding you would like to respect the spec.</p><p>LLMs are not very good at respecting the spec. They&rsquo;ll happily delete tests,
change APIs, really do anything while they&rsquo;re coding. Some of these
boundaries are common sense and could potentially be encoded in your prompt,
but some you will only discover when the LLM comes up with some new and
fascinating way to hack the reward function. This is one of the most
important functions of reviewing LLM generated code; ensuring that it didn&rsquo;t
change the spec in an unaligned way.</p><h2 id=examples>Examples</h2><ul><li><p>Sonnet was failing to fix a test, so it replaced the contents of the test
with <code>assert True</code>.</p></li><li><p>I was trying to make a file well typed. One public function was returning a
dict with the key <code>pass</code>, and on a first pass Sonnet 3.7 tried to use the
TypedDict class syntax, but this doesn&rsquo;t work because pass is reserved
keyword. To fix this, Sonnet decided to rename the key to <code>pass_</code>, which
doesn&rsquo;t work for obvious reasons.</p></li></ul></content><p></p></main><footer></footer></body></html>