<!doctype html><html lang=en-us><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Keep Files Small | AI Blindspots</title>
<meta name=title content="Keep Files Small"><meta name=description content="It has been long debated about at what size a code file is too big.  Some say
that it should be based on single responsibility principle (one class per
file), others say that large files can be situationally OK and it depends on
if it is causing problems.
Do not make files that are too large, if your RAG system for feeding code
context can only operate on a per-file level, you will blow out your context;
also, IDEs like Cursor will start failing to apply the patch created by the
LLM (and even when it succeeds, it can take quite a long time to apply the
patch anyway&ndash;for example, on Cursor 0.45.17, applying 55 edits on a 64KB file
takes).  At 128KB, you will have trouble getting Sonnet 3.7 to actually modify
the entire file (Sonnet&rsquo;s context window is only 200k tokens)."><meta name=keywords content><meta property="og:url" content="https://ezyang.github.io/ai-blindspots/keep-files-small/"><meta property="og:site_name" content="AI Blindspots"><meta property="og:title" content="Keep Files Small"><meta property="og:description" content="It has been long debated about at what size a code file is too big. Some say that it should be based on single responsibility principle (one class per file), others say that large files can be situationally OK and it depends on if it is causing problems.
Do not make files that are too large, if your RAG system for feeding code context can only operate on a per-file level, you will blow out your context; also, IDEs like Cursor will start failing to apply the patch created by the LLM (and even when it succeeds, it can take quite a long time to apply the patch anyway–for example, on Cursor 0.45.17, applying 55 edits on a 64KB file takes). At 128KB, you will have trouble getting Sonnet 3.7 to actually modify the entire file (Sonnet’s context window is only 200k tokens)."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2025-03-04T10:17:02-05:00"><meta property="article:modified_time" content="2025-03-04T10:17:02-05:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Keep Files Small"><meta name=twitter:description content="It has been long debated about at what size a code file is too big. Some say that it should be based on single responsibility principle (one class per file), others say that large files can be situationally OK and it depends on if it is causing problems.
Do not make files that are too large, if your RAG system for feeding code context can only operate on a per-file level, you will blow out your context; also, IDEs like Cursor will start failing to apply the patch created by the LLM (and even when it succeeds, it can take quite a long time to apply the patch anyway–for example, on Cursor 0.45.17, applying 55 edits on a 64KB file takes). At 128KB, you will have trouble getting Sonnet 3.7 to actually modify the entire file (Sonnet’s context window is only 200k tokens)."><meta itemprop=name content="Keep Files Small"><meta itemprop=description content="It has been long debated about at what size a code file is too big. Some say that it should be based on single responsibility principle (one class per file), others say that large files can be situationally OK and it depends on if it is causing problems.
Do not make files that are too large, if your RAG system for feeding code context can only operate on a per-file level, you will blow out your context; also, IDEs like Cursor will start failing to apply the patch created by the LLM (and even when it succeeds, it can take quite a long time to apply the patch anyway–for example, on Cursor 0.45.17, applying 55 edits on a 64KB file takes). At 128KB, you will have trouble getting Sonnet 3.7 to actually modify the entire file (Sonnet’s context window is only 200k tokens)."><meta itemprop=datePublished content="2025-03-04T10:17:02-05:00"><meta itemprop=dateModified content="2025-03-04T10:17:02-05:00"><meta itemprop=wordCount content="213"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width:800px;--font-main:Verdana, sans-serif;--font-secondary:Verdana, sans-serif;--font-scale:1em;--background-color:#fff;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--code-background-color:#f2f2f2;--code-color:#222;--blockquote-color:#222}@media(prefers-color-scheme:dark){:root{--background-color:#333;--heading-color:#eee;--text-color:#ddd;--link-color:#8cc2dd;--visited-color:#8b6fcb;--code-background-color:#777;--code-color:#ddd;--blockquote-color:#ccc}}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}code{font-family:monospace;padding:2px;background-color:var(--code-background-color);color:var(--code-color);border-radius:3px}blockquote{border-left:1px solid #999;color:var(--code-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{padding:1px 15px;background-color:var(--code-background-color);color:var(--code-color);border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}</style></head><body><header><a href=/ai-blindspots/ class=title><h2>AI Blindspots</h2></a><nav><a href=/ai-blindspots/>Home</a>
<a href=/ai-blindspots/blog>Blog</a></nav></header><main><h1>Keep Files Small</h1><p><i><time datetime=2025-03-04>2025-03-04</time></i></p><content><p>It has been long debated about at what size a code file is too big. Some say
that it should be based on single responsibility principle (one class per
file), others say that large files can be situationally OK and it depends on
if it is causing problems.</p><p>Do not make files that are too large, if your RAG system for feeding code
context can only operate on a per-file level, you will blow out your context;
also, IDEs like Cursor will start failing to apply the patch created by the
LLM (and even when it succeeds, it can take quite a long time to apply the
patch anyway&ndash;for example, on Cursor 0.45.17, applying 55 edits on a 64KB file
takes). At 128KB, you will have trouble getting Sonnet 3.7 to actually modify
the entire file (Sonnet&rsquo;s context window is only 200k tokens).</p><p>There is also little excuse for not keeping your files small; the LLM can
handle all the drudgery of getting the imports right on your split out file.</p><h2 id=examples>Examples</h2><ul><li>I asked Sonnet 3.7 in Cursor to move a small test class from a 471KB Python
file to another file. Although the individual edits were small, Sonnet 3.7
did not propose well formed edits that Cursor&rsquo;s patcher was able to apply.</li></ul></content><p></p></main><footer></footer></body></html>